<!DOCTYPE html>
<html>
<head>
    <title>{{ title }}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&family=Roboto:wght@400;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Federo&family=Macondo&family=Macondo+Swash+Caps&display=swap');

        /* General Body and Font Styles */
        body { font-family: 'Federo', serif; line-height: 1.6; color: #333; }
        h1, h2, h3, h4, h5, h6 { font-family: 'Macondo', sans-serif; font-weight: 700; }
        h2 {
            border-bottom: 2px solid #cccccc;
            padding-bottom: 10px;
            font-size: 24pt;
            string-set: current_section content();
            page-break-after: avoid;
        }
        h3 {
            font-size: 18pt;
            border-bottom: 1px solid #eeeeee;
            padding-bottom: 5px;
            page-break-after: avoid;
        }

        pre { background-color: #f5f5f5; padding: 1em; border-radius: 4px; white-space: pre-wrap; word-wrap: break-word; font-family: 'Courier New', Courier, monospace; }
        table { border-collapse: collapse; width: 100%; margin-top: 1em;}
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }

        /* Page Definitions */
        @page {
            size: A4;
            margin: 2cm;
            @bottom-left {
                content: string(current_section, first);
                font-size: 9pt;
                color: #888;
            }
            @bottom-right {
                content: "Page " counter(page);
                font-size: 9pt;
                color: #888;
            }
        }
        @page:first {
            margin: 1cm;
            @bottom-center {
                content: "Generated by the \"Scenario Generator X Papoulos\"";
                font-size: 9pt;
                color: #888;
                vertical-align: top;
            }
        }

        /* Cover Page */
        .cover-page {
            page-break-after: always;
            width: 100%;
            height: 90vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        .cover-title {
            font-size: 40pt;
        }

        /* Table of Contents */
        #toc {
            page-break-after: always;
        }
        #toc h2 {
            text-align: center;
            border-bottom: 2px solid #cccccc;
            padding-bottom: 10px;
            string-set: current_section "Table des Mati√®res";
        }
        #toc ul { list-style-type: none; padding: 0; }
        #toc li a { text-decoration: none; color: #333; display: block; padding: 5px 0; }
        #toc li a::after { content: leader('.') target-counter(attr(href), page); }

        /* This class is added by the generator to each H2 for page-breaking */
        .new-page { **page-break-before: always;** }
    </style>
</head>
<body>
    <div class="cover-page">
        <h1 class="cover-title">{{ title }}</h1>
    </div>

    {{ toc|safe }}

    {#
      The content is now a dictionary of sections.
      The user can reorder these blocks to change the PDF layout.
      The check '{% if sections.section_name %}' makes the template robust
      in case a section was not generated.
    #}

    {#
      The content is now a dictionary of sections.
      We loop through all the sections provided by the generator
      to ensure everything is included in the PDF.
    #}
    {% for section_html in sections.values() %}
        {{ section_html|safe }}
    {% endfor %}

</body>
</html>
